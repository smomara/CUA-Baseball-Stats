<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>CUA Baseball Extended Hitting Statistics</title>
    <link rel = "stylesheet" href = "style.css">
  </head>
  <body>
    <h1>CUA Baseball Extended Hitting Statistics</h1>
    <p><a href = "../">Home</a> | <a href = "./"><u>2023</u></a> | <a href = "../2022/">2022</a></p>
    <table id="csv-data">
      <thead>
        <tr>
          <th>No.</th>
          <th>Player</th>
          <th>PA</th>
          <th>HR</th>
          <th>R</th>
          <th>RBI</th>
          <th>SB</th>
          <th>BB%</th>
          <th>K%</th>
          <th>ISO</th>
          <th>BABIP</th>
          <th>AVG</th>
          <th>OBP</th>
          <th>SLG</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <script>
      var csvData = "";
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          csvData = this.responseText;
          displayCSVData(csvData);
        }
      };
      xmlhttp.open("GET", "table2023.csv", true);
      xmlhttp.send();
      
      setInterval(function() {
        xmlhttp.open("GET", "table2023.csv", true);
        xmlhttp.send();
      }, 5000); // check for updates every 5 seconds
      
      function displayCSVData(csv) {
        var rows = csv.split("\n");
        var table = document.getElementById("csv-data").getElementsByTagName("tbody")[0];
        table.innerHTML = ""; // clear existing rows
        for (var i = 0; i < rows.length; i++) {
          var cells = rows[i].split(",");
          if (cells.length > 1) {
            var row = table.insertRow(-1);
            for (var j = 0; j < cells.length; j++) {
              var cell = row.insertCell(-1);
              cell.innerHTML = cells[j];
            }
          }
        }
      }
    </script>
  </body>
</html>